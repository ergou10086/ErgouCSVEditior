<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.effect.DropShadow?>

<BorderPane fx:id="rootPane" 
            styleClass="root-pane"
            xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="hbnu.project.ergoucsveditior.controller.MainController"
            prefHeight="700.0" 
            prefWidth="1100.0"
            stylesheets="@styles.css">
    
    <!-- é¡¶éƒ¨èœå•æ å’Œå·¥å…·æ  -->
    <top>
        <VBox spacing="0">
            <!-- èœå•æ  -->
            <MenuBar>
                <Menu text="æ–‡ä»¶ ðŸ“">
                    <MenuItem text="æ–°å»º âœ¨" onAction="#handleNew"/>
                    <MenuItem text="æ‰“å¼€... ðŸ“‚" onAction="#handleOpen"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="ä¿å­˜ ðŸ’¾" onAction="#handleSave"/>
                    <MenuItem text="å¦å­˜ä¸º... ðŸ’¾" onAction="#handleSaveAs"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="é€€å‡º ðŸšª" onAction="#handleExit"/>
                </Menu>
                
                <Menu text="ç¼–è¾‘ âœï¸">
                    <MenuItem text="æ’¤é”€ â†¶" onAction="#handleUndo" accelerator="Ctrl+Z"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="æŸ¥æ‰¾... ðŸ”" onAction="#handleSearch" accelerator="Ctrl+F"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="æ·»åŠ è¡Œ âž•" onAction="#handleAddRow"/>
                    <MenuItem text="æ·»åŠ åˆ— âž•" onAction="#handleAddColumn"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="åˆ é™¤é€‰ä¸­è¡Œ âž–" onAction="#handleDeleteRow"/>
                    <MenuItem text="åˆ é™¤é€‰ä¸­åˆ— âž–" onAction="#handleDeleteColumn"/>
                </Menu>
                
                <Menu text="å·¥å…· ðŸ”§">
                    <MenuItem text="è‡ªåŠ¨æ ‡è®°å·¥å…·... ðŸ·ï¸" onAction="#handleAutoMark"/>
                    <MenuItem text="æ•°å€¼åˆ—ç»Ÿè®¡è®¡ç®—... ðŸ“Š" onAction="#handleColumnStatistics"/>
                    <MenuItem text="MySQLæ•°æ®åº“æŒä¹…åŒ–... ðŸ—„ï¸" onAction="#handleDatabasePersistence"/>
                    <SeparatorMenuItem/>
                    <Menu text="å¯¼å‡ºå·¥å…· ðŸ“¤">
                        <Menu text="åŸºæœ¬æ ¼å¼">
                            <MenuItem text="å¯¼å‡ºä¸ºCSV... ðŸ“„" onAction="#handleExportToCSV"/>
                            <MenuItem text="å¯¼å‡ºä¸ºTXT... ðŸ“" onAction="#handleExportToTXT"/>
                            <MenuItem text="å¯¼å‡ºä¸ºHTML... ðŸŒ" onAction="#handleExportToHTML"/>
                        </Menu>
                        <Menu text="é«˜çº§æ ¼å¼">
                            <MenuItem text="å¯¼å‡ºä¸ºExcel... ðŸ“Š" onAction="#handleExportToExcel"/>
                            <MenuItem text="å¯¼å‡ºä¸ºPDF... ðŸ“•" onAction="#handleExportToPDF"/>
                            <MenuItem text="å¯¼å‡ºä¸ºMarkdown... ðŸ“" onAction="#handleExportToMarkdown"/>
                        </Menu>
                        <SeparatorMenuItem/>
                        <MenuItem text="å¯¼å‡ºè®¾ç½®... âš™ï¸" onAction="#handleExportSettings"/>
                    </Menu>
                </Menu>
                
                <Menu text="è®¾ç½® âš™ï¸">
                    <MenuItem text="åº”ç”¨è®¾ç½®... ðŸŽ¨" onAction="#handleSettings"/>
                    <MenuItem text="ä¸»é¢˜è®¾ç½®... ðŸŒˆ" onAction="#handleThemeSettings"/>
                    <MenuItem text="å¿«æ·é”®è®¾ç½®... âŒ¨ï¸" onAction="#handleKeyBindings"/>
                    <MenuItem text="å·¥å…·æ è®¾ç½®... ðŸ”§" onAction="#handleToolbarSettings"/>
                    <MenuItem text="é«˜äº®è®¾ç½®... âœ¨" onAction="#handleHighlightSettings"/>
                </Menu>
                
                <Menu text="å¸®åŠ© â“">
                    <MenuItem text="å…³äºŽ â„¹ï¸" onAction="#handleAbout"/>
                </Menu>
            </MenuBar>
            
            <!-- å·¥å…·æ  - å°†ç”±ä»£ç åŠ¨æ€ç”Ÿæˆ -->
            <ToolBar fx:id="toolbar">
                <!-- æŒ‰é’®å°†ç”± MainController åŠ¨æ€æ·»åŠ  -->
            </ToolBar>
        </VBox>
    </top>
    
    <!-- ä¸­é—´è¡¨æ ¼åŒºåŸŸ -->
    <center>
        <StackPane>
            <padding>
                <Insets top="10.0" right="10.0" bottom="10.0" left="10.0"/>
            </padding>
            <TableView fx:id="tableView" BorderPane.alignment="CENTER">
                <placeholder>
                    <VBox alignment="CENTER" spacing="15">
                        <Label text="âœ¨ æ¬¢è¿Žä½¿ç”¨ CSV è¡¨æ ¼ç¼–è¾‘å™¨ âœ¨" styleClass="heading"/>
                        <Label text="è¯·åˆ›å»ºæ–°è¡¨æ ¼æˆ–æ‰“å¼€å·²æœ‰æ–‡ä»¶" styleClass="sub-heading"/>
                        <HBox alignment="CENTER" spacing="10">
                            <Button text="æ–°å»ºè¡¨æ ¼" onAction="#handleNew" styleClass="button"/>
                            <Button text="æ‰“å¼€æ–‡ä»¶" onAction="#handleOpen" styleClass="button secondary"/>
                        </HBox>
                    </VBox>
                </placeholder>
            </TableView>
        </StackPane>
    </center>
    
    <!-- åº•éƒ¨çŠ¶æ€æ  -->
    <bottom>
        <HBox styleClass="status-bar" alignment="CENTER_LEFT" spacing="15.0">
            <padding>
                <Insets top="8.0" right="15.0" bottom="8.0" left="15.0"/>
            </padding>
            
            <Label text="ðŸ’« çŠ¶æ€:"/>
            <Label fx:id="statusLabel" text="å°±ç»ª" style="-fx-font-weight: 600;"/>
            
            <!-- ä½¿ç”¨SpaceræŽ¨åˆ°å³è¾¹ -->
            <Region HBox.hgrow="ALWAYS"/>
            
            <Separator orientation="VERTICAL"/>
            
            <Label text="ðŸ“ ä½ç½®:"/>
            <Label fx:id="positionLabel" text="æœªé€‰ä¸­" style="-fx-font-weight: 600;"/>
            
            <Separator orientation="VERTICAL"/>
            
            <Label text="ðŸ” ç¼©æ”¾: Ctrl+æ»šè½®" style="-fx-font-size: 11px; -fx-opacity: 0.8;"/>
            
            <Separator orientation="VERTICAL"/>
            
            <Label text="ðŸ–±ï¸ æ‹–åŠ¨: ç§»åŠ¨è¡Œ" style="-fx-font-size: 11px; -fx-opacity: 0.8;"/>
        </HBox>
    </bottom>
    
</BorderPane>
